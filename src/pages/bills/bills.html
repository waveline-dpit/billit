<!--
  Generated template for the BillsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->


<ion-header (click)="closeFabIfActive()">


  <ion-navbar>
    <ion-buttons left class="padd">
      <button ion-button icon-only (click)="openModal()" class="share_button" >
        <ion-icon  name="search"></ion-icon>
      </button>
    </ion-buttons>
    <img src="assets/Images/logo.png" class="billit_image">

    <ion-buttons right class="padd">
      <button ion-button icon-only (click)="presentPopoverSort($event)">
        <ion-icon ios="ios-funnel-outline" name="funnel"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons right class="padd" right *ngIf="platform.is('ios')">
      <button ion-button icon-only (click)="presentPopover($event)">
        <ion-icon name="add"></ion-icon>
      </button>
    </ion-buttons>

  </ion-navbar>
</ion-header>


<ion-content padding class="backgroundIMG">
  <!--<ion-item>
    <ion-input type="text" placeholder="qr data" [(ngModel)]="qrData"></ion-input>
  </ion-item>
  <button ion-button full (click)="createCode()">Create code</button>
  <button ion-button full (click)="scanCode()">Scan code</button>

  <ion-card *ngIf="createdCode">
    <ngx-qrcode [qrc-value]="createdCode" ></ngx-qrcode>
    <ion-card-content>
      <p>
        value: {{createdCode}}
      </p>
    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="scannedCode">
    <ion-card-content>
      <p>
        result from scan: {{scannedCode}}
      </p>
    </ion-card-content>
  </ion-card>
-->


  <div *ngFor="let bill of billsToShow; let i = index">

    <div class="interval" >
      <div *ngIf="intervalToShow[i] != null">
        <div class="linee">- </div>{{intervalToShow[i]}}<div class="linee"> -</div>
      </div>

    </div>
    <ion-card >
      <ion-card-content>
        <ion-list>
          <ion-item-sliding #slidingItem>

            <ion-item class="itemlist" (click)="goToBillPage(bill)" (touchstart)="closeSlideIfOpen(slidingItem)">
              <div>
                <div class="inline ">
                  <div class="inline">
                    <ion-icon name="calendar" isActive="false"></ion-icon>
                    {{bill.date}}
                  </div>
                  <div class="inline">
                    <ion-icon class="margin-left" name="time" isActive="false"></ion-icon>
                    {{bill.time}}
                  </div>
                </div>
              </div>
              <div class="clear">
                <div class=" inline left topp bott">
                  {{bill.storeName}}
                </div>
                <div class="inline right topp bott6">
                  {{bill.totalAmount}} RON
                </div>
              </div>
            </ion-item>

            <ion-item-options side="right">

              <button *ngIf="!bill.favourite" class="fav" ion-button color="light" (click)="addToFavourite(bill, slidingItem)">
                <ion-icon name="star-outline"></ion-icon>
                Favourite
              </button>
              <button *ngIf="bill.favourite" class="fav" ion-button color="fav-yellow" (click)="removeFromFavourite(bill, slidingItem)">
                <ion-icon name="star-outline"></ion-icon>
                Favourite
              </button>
            </ion-item-options>

            <ion-item-options side="left">
              <button class="fav" ion-button color="danger" (click)="showAlert(bill.$key)">
                <ion-icon name="trash"></ion-icon>
                Delete
              </button>
            </ion-item-options>


          </ion-item-sliding>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </div>


  <ion-fab id="fabId" right bottom *ngIf="!platform.is('ios')" #fab>
    <button (click)="clickedFab(fab)" ion-fab mini class="fab" color='primary'>
      <ion-icon name="add"></ion-icon>
    </button>
    <ion-fab-list side="top">
      <button ion-fab color="primary"(click)="scanCode()"><ion-icon name="cloud-download"></ion-icon></button>
      <button ion-fab color="primary"(click)="goToAddBillPage();"><ion-icon name="create" ></ion-icon></button>
      <button ion-fab  color="primary"(click)="closeFab(fab)"><ion-icon  name="camera"></ion-icon></button>

    </ion-fab-list>
  </ion-fab>


</ion-content>
